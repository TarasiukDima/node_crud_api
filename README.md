# node_crud_api


## Этапы:
  1. Сначала скачайте репозиторий при помощи команды
   - git clone git@github.com:TarasiukDima/node_crud_api.git
  2. Перейти в скаченный каталог
   - cd node_crud_api
  3. Скачать все ветки
   -  git pull --all
  4. Перейти на ветку разработки
   - git checkout develop
  5. Установите все зависимости
   - npm install


## Команды:

1. npm run start:dev - запускает скрипт в режиме разработки.
2. npm run start:prod - собирает продакшн файл и запускает сервер.
3. npm run start:multi - собирает продакшн файл с кластером и запускает сервер.
4. npm run test - запускает скрипты(для работы нужен запущенный сервер в отдельной вкладке терминала).

## Информация:
- http://localhost:3000/ - урл сервера.
- для получения всех юзеров **api/users/** или **api/users** оба варианта валидные.
- Метод PUT для конкретного юзера принимает все поля (username, age, hobbies). **Все поля обязательные**. Можно передать те же данные.
- Для проверки 500 ошибки сервера в файле scr/database/database.ts в методах добавляйте throw new Error('').
- Если в объект для обновления или создания юзера передать лишние поля они будут игнорироваться.

## Пример объекта для создания:
```javascript
{
  "username": "User 1",
  "age": 30,
  "hobbies": ["codding"]
}
```

## Запросы:
  - GET '/api/users' или '/api/users/' - для получения всех юзеров
  - POST '/api/users' - для создания юзера. В body передать объект JSON можно с примера выше.
  - GET '/api/users/id' - вместо id введите id созданного. Вернется информация о юзере, если он есть.
  - PUT '/api/users/id' - для обновления информации о юзере. Нужно передавать все поля в body.
  - DELETE '/api/users/id' - для удаления юзера.

## Body для запросов с созданием или редактированием должен содержать объект со следующими полями:
  - "username" - строка.
  - "age" - цифра.
  - "hobbies": массив строк.

## Тесты:

- путь test/test.ts.
- В 1 файле 3 сценария.
- В тестах использую другой порт 3030, т.к. если использовать порт из .env 3000 появляется предупреждение, что порт занят, в связи с этим, чтобы не показывалось предупреждение поменял для тестов порт. Для проверки можете в строке 22 убрать 3030 ||, оставив process.env.PORT.


### PS: после дедлайна обновлен только Readme файл.
